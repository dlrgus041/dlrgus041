<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <style>
      .ab {
        position: absolute;
        top: 50%;
        left: 50%;
        translate: -50% -50%;
    </style>
    <title>PokeAPI</title>
  </head>
  <body>
    <section class="ab">
      <section>
        포켓몬 ID: <input type="number" id="id" />
        <button id="btn">검색</button>
      </section>
      <div class="card text-center" style="width: 18rem; margin:5px;">
          <Image id="pokeImg" class="card-img-top" style="margin:2px;">
          <div class="card-body">
              <h5 id="pokeName" class="card-title" style="margin:2px;"></h5>
              <Image id="type1" style="margin:2px;"></Image>
              <Image id="type2" style="margin:2px;"></Image>
          </div>
      </div>
    </section>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>
    <script>
        const pokeImg = document.getElementById("pokeImg")
        const pokeName = document.getElementById("pokeName")
        const type1Img = document.getElementById("type1")
        const type2Img = document.getElementById("type2")

      async function fetchPokemon(id) {
        const res0 = await fetch(`https://pokeapi.co/api/v2/pokemon/${id}`);
        const data0 = await res0.json();

        // 한국어 이름
        const res1 = await fetch(data0.species.url);
        const data1 = await res1.json();
        const korName = data1.names.find((name) => name.language.name === "ko").name;
        pokeName.textContent = korName;

        console.log(data0);

        // 타입
        const res2 = await fetch(data0.types[0].type.url);
        const data2 = await res2.json();
        const type1 = data2.sprites['generation-ix']['scarlet-violet'].name_icon;
        let type2 = null;
        type1Img.src = type1;
        type2Img.style.visibility = "hidden";

        if (data0.types[1]) {
            const res21 = await fetch(data0.types[1].type.url);
            const data21 = await res21.json();
            type2 = data21.sprites['generation-ix']['scarlet-violet'].name_icon;
            type2Img.src = type2;
            type2Img.style.visibility = "visible";
        }

        // 앞모습
        pokeImg.src = data0.sprites.front_default;
      }

      document.getElementById("btn").addEventListener("click", () => {
        const id = document.getElementById("id").value;
        fetchPokemon(id);
      });
    </script>
  </body>
</html>


